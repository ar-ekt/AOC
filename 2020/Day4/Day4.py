print(*(lambda passports: (sum(all(field in passport for field in ["byr", "iyr", "eyr", "hgt", "hcl", "ecl", "pid"]) for passport in passports), sum(all(field in passport and (lambda field, value: ((field == "byr" and (lambda v: v.isdigit() and 1920 <= int(v) <= 2002)(value)) or (field == "iyr" and (lambda v: v.isdigit() and 2010 <= int(v) <= 2020)(value)) or (field == "eyr" and (lambda v: v.isdigit() and 2020 <= int(v) <= 2030)(value)) or (field == "hgt" and (lambda v: (v[-2:] == "cm" and v[:-2].isdigit() and 150 <= int(v[:-2]) <= 193) or (v[-2:] == "in" and v[:-2].isdigit() and 59 <= int(v[:-2]) <= 76))(value)) or (field == "hcl" and (lambda v: len(v) == 7 and v[0] == "#" and not v[1:].strip("0123456789abcdef"))(value)) or (field == "ecl" and (lambda v: v in ("amb", "blu", "brn", "gry", "grn", "hzl", "oth"))(value)) or (field == "pid" and (lambda v: len(v) == 9 and v.isdigit())(value))))(field, passport[field]) for field in ["byr", "iyr", "eyr", "hgt", "hcl", "ecl", "pid"]) for passport in passports)))(list(map(lambda passport: {field.split(":")[0]: field.split(":")[1] for field in passport.replace("\n", " ").split()}, open("Day4.txt").read().split("\n\n")))), sep = "\n")
